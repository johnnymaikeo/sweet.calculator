define(["app"],function(e){"use strict";angular.module("app").controller("CalculatorController",function(){function e(e){t.display.length<=10?("0"!==t.display&&"ERROR"!==t.display||(t.display="",t.upperline=""),""===t.display&&"."===e&&(t.display+="0"),t.display+=e):l("max 10 caracters")}function n(){t.display="0",t.upperline=""}function i(){const e=/\([^()"]*(?:"[^"]*"[^()"]*)*\)/;var n;for(t.upperline=t.display;n=e.exec(t.display);)r(n[0]);r(t.display)}function l(e){t.display="ERROR",t.upperline=e}function r(e){var n=a(e);n?(t.display=t.display.replace(e,n),t.display.length>10&&(t.display=t.display.slice(0,10))):l("Invalid expression evaluated")}function a(e){const n=/([\(\)])/g,i=/([-+/*])/gi;var l,r,a,t=(e=e.replace(n,"")).split(i);if(2==t.length)return null;if(1==t.length)return t[0];for(var p in s)if(s.hasOwnProperty(p))for(;t.indexOf(p)>=0;){if(l=t.indexOf(p),r=parseFloat(t[l-1]),a=parseFloat(t[l+1]),isNaN(r)||isNaN(a))return null;var u=s[p](r,a);t.splice(l-1,3,u)}return t[0]}var t=this;t.display="0",t.upperline="",t.buttonPressClear=n,t.buttonPressEval=i,t.buttonPress=e,t.keyPress=function(l){if("Escape"!==l.key)if("Enter"!==l.key){const n=/^[0-9+-/*\(\)]$/;null!==n.exec(l.key)&&e(l.key)}else i();else n()};var s={"+":function(e,n){return e+n},"-":function(e,n){return e-n},"/":function(e,n){return e/n},"*":function(e,n){return e*n}}})});